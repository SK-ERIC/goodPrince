(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"0e58":function(t,e,o){"use strict";var n=o("3c72"),s=o.n(n);s.a},"24cc":function(t,e,o){"use strict";var n,s=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}))},"3c72":function(t,e,o){},5448:function(t,e,o){"use strict";o.r(e);var n=o("24cc"),s=o("f2f4");for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);o("0e58");var a,r=o("f0c5"),u=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,"96de7076",null,!1,n["a"],a);e["default"]=u.exports},cb97:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o("2f62");var n=function(){o.e("pages/component/latelyShopList").then(function(){return resolve(o("b46a"))}.bind(null,o)).catch(o.oe)},s=function(){o.e("pages/component/latelyPhotoList").then(function(){return resolve(o("db5c"))}.bind(null,o)).catch(o.oe)},i=function(){o.e("pages/component/foot").then(function(){return resolve(o("9e06"))}.bind(null,o)).catch(o.oe)},a=function(){o.e("pages/component/pop").then(function(){return resolve(o("d85b"))}.bind(null,o)).catch(o.oe)},r={components:{latelyShopList:n,latelyPhotoList:s,foot:i,pop:a},data:function(){return{topLeftText:"我的个人中心",latelyList:[],photoList:[],userInfo:{},msgNum:0,popCont:"您今天对此条留言的点赞次数已达上限",isShowSafearea:!1}},watch:{photoList:{handler:function(t,e){for(var o=0;o<t.length;o++)e[o]!=t[o]&&(this.photoList=t)},deep:!0}},created:function(){this.getUserInfo(),t.setNavigationBarTitle({title:"个人中心"})},methods:{getUserInfo:function(){var t=this;this.$http.getUserInfo({},(function(e){1==e.code?(t.userInfo=e.data.userinfo,t.msgNum=e.data.userinfo.replyCount,t.$db.set("userinfo",e.data.userinfo),t.postCommentShop(),t.postBeenShop()):t.$common.errorToShow(e.msg)}))},postCommentShop:function(){var t=this;this.$http.postCommentShop({user_id:this.userInfo.user_id},(function(e){1==e.code?(console.log("最近拍过的店： ",e.data),t.photoList=e.data.slice(0,1)):t.$common.errorToShow(e.msg)}))},postBeenShop:function(){var t=this;this.$http.postBeenShop({user_id:this.userInfo.user_id},(function(e){1==e.code?(console.log("最近去过的店： ",e.data),t.latelyList=e.data):t.$common.errorToShow(e.msg)}))},previewImage:function(e,o){var n=o.currentTarget.dataset.src;t.previewImage({urls:e,current:n})},_changeLike:function(t){var e=this,o=t.item,n=(t.bl,t.index),s=+this.photoList[n].zan,i=this.$db.get("userinfo").user_id;this.$http.postSaveZan({cid:o.id,uid:i},(function(t){if(1==t.code){var o=t.data.code,i=t.data.msg;200==o?(e.$set(e.photoList[n],"myZan",1),e.$set(e.photoList[n],"zan",++s)):100==o?(e.popCont=i,e.$refs.popup.$refs.pop.open()):300==o&&(e.$set(e.photoList[n],"myZan",0),e.$set(e.photoList[n],"zan",--s))}else e.$common.errorToShow(t.msg)}))},_changeFullText:function(t){var e=t.e,o=e.currentTarget.dataset.index,n=e.currentTarget.dataset.text;this.photoList[o].full_text="全文"==n?"收起全文":"全文"},_switchToMsg:function(){var e=this.userInfo.replyCount;t.navigateTo({url:"/pages/user/msg?total=".concat(e)})},_switchEditInfo:function(){t.navigateTo({url:"/pages/user/info"})},_switchlatelyPhoto:function(){t.navigateTo({url:"/pages/user/latelyPhoto?total=".concat(this.userInfo.commentCount)})},_switchlatelyShop:function(){t.navigateTo({url:"/pages/user/latelyShop?total=".concat(this.userInfo.beenCount)})},_switchShopHome:function(t){this.$emit("handleClick",t)}}};e.default=r}).call(this,o("543d")["default"])},db1c:function(t,e,o){"use strict";(function(t){o("4475");n(o("66fd"));var e=n(o("5448"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},f2f4:function(t,e,o){"use strict";o.r(e);var n=o("cb97"),s=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=s.a}},[["db1c","common/runtime","common/vendor"]]]);