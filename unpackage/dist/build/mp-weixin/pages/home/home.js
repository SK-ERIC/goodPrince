(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"3d9e":function(t,e,n){},"4eea":function(t,e,n){"use strict";n.r(e);var o=n("769c"),i=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=i.a},"591e":function(t,e,n){"use strict";(function(t){n("7c16");o(n("66fd"));var e=o(n("c294"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},7455:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}))},"769c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("4795"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,o,i,s,c){try{var a=t[s](c),r=a.value}catch(u){return void n(u)}a.done?e(r):Promise.resolve(r).then(o,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var c=t.apply(e,n);function a(t){s(c,o,i,a,r,"next",t)}function r(t){s(c,o,i,a,r,"throw",t)}a(void 0)}))}}var a=function(){n.e("pages/component/pop").then(function(){return resolve(n("faa7"))}.bind(null,n)).catch(n.oe)},r={components:{pop:a},data:function(){return{page:"shop",showPage:!1,containerHeight:800,tabbar:[{iconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_shop.png",selectedIconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_shop_sel.png",title:"首页",page:"shop"},{iconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_photo.png",selectedIconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_photo.png",title:"",page:""},{iconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_user.png",selectedIconPath:"https://wxhyx-cdn.aisspc.cn/static/tabIcon_user_sel.png",title:"我的",page:"user"}],showLoading:!1,shopInfo:{},shopId:1,topNum:0,commentList:[],popCont:"您今天对此条留言的点赞次数已达上限"}},watch:{commentList:{handler:function(t,e){for(var n=0;n<t.length;n++)e[n]!=t[n]&&(this.commentList=t)},deep:!0}},onLoad:function(t){console.log("home",t);var e="";if(t.id&&(e=t.id),t.page&&(this.page=t.page),t.q){var n=decodeURIComponent(t.q);utils.getQueryString(n,"access_token");e=utils.getQueryString(n,"id")}e&&(this.shopId=e),this.init_page_size(),this.getShopIndex()},methods:{_changeLike:function(t){var e=this;if(this.$db.userMobile()){var n=t.item,o=t.bl,i=t.index,s=+this.commentList[i].zan;o?this.$http.postSaveZan({cid:n.id,uid:n.uid},(function(t){1==t.code?(e.$set(e.commentList[i],"like",o),e.$set(e.commentList[i],"zan",++s)):e.$common.errorToShow(t.msg)})):this.$refs.popup.$refs.pop.open()}},_changeFullText:function(t){var e=t.e,n=e.currentTarget.dataset.index,o=e.currentTarget.dataset.text;this.commentList[n].full_text="全文"==o?"收起全文":"全文"},_switchPostComments:function(){this.$db.userMobile()&&t.navigateTo({url:"/pages/index/postComments"})},getShopIndex:function(){var t=this;this.$http.getShopIndex({shop_id:this.shopId},(function(e){1==e.code?(t.shopInfo=e.data,t.postShopCommentsList()):t.$common.errorToShow(e.msg)}))},postShopCommentsList:function(){var t=this;this.$http.postShopCommentsList({page:1,page_size:2},(function(e){1==e.code?t.commentList=e.data:t.$common.errorToShow(e.msg)}))},_handleClick:function(t){console.log("店铺信息：",t),this.page="shop",this.topNum=this.topNum+.001,this.shopId=t.shop_id,this.getShopIndex()},changeTab:function(e){var n=this;if(e.page){if("user"==e.page&&!this.$db.userMobile())return;this.page=e.page,t.setNavigationBarTitle({title:e.title})}else{if(!this.$db.userMobile())return;this.$http.uploadImage(1,(function(e,o){1==e.code?t.navigateTo({url:"/pages/index/postComments?src=".concat(o,"&tem=").concat(e.data.url)}):n.$common.errorToShow(e.msg)}))}},init_page_size:function(){var e=this;return c(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$nextTick(c(o.default.mark((function n(){var i,s,c,a,r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.getSystemInfoSync(),s=t.createSelectorQuery().in(e),c=s.select("#tabbar"),n.next=5,e.syncBoundingClientRect(c);case 5:a=n.sent,r=i.windowHeight-a.height,e.containerHeight=r,e.showPage=!0;case 9:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})))()},syncBoundingClientRect:function(t){return new Promise((function(e,n){t.boundingClientRect((function(t){e(t)})).exec()}))}}};e.default=r}).call(this,n("543d")["default"])},c294:function(t,e,n){"use strict";n.r(e);var o=n("7455"),i=n("4eea");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("cb4a");var c,a=n("f0c5"),r=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"b21e5d28",null,!1,o["a"],c);e["default"]=r.exports},cb4a:function(t,e,n){"use strict";var o=n("3d9e"),i=n.n(o);i.a}},[["591e","common/runtime","common/vendor"]]]);