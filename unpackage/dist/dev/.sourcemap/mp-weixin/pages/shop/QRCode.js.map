{"version":3,"sources":["webpack:///D:/UNI/goodPrince/main.js","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?4352","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?1721","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?4c6b","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?1aef","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?772d","webpack:///D:/UNI/goodPrince/pages/shop/QRCode.vue?6f0a"],"names":["createPage","Page","_this","data","canvasW","canvasH","imgSrc","Title","QrSrc","LineType","tempFilePath","finished","openSettingBtnHidden","mounted","OnCanvas","methods","handleSetting","e","detail","authSetting","saveImage","uni","showToast","title","icon","getSetting","success","res","console","log","authorize","scope","saveImgToLocal","fail","showModal","content","confirm","downloadFile","url","statusCode","saveImageToPhotosAlbum","filePath","cancel","previewImage","urls","current","ctx","createCanvasContext","C_W","upx2px","C_P","C_Q","_strlineW","getImageInfo","_imgInfo","_QrCode","r","width","height","q","imgW","Math","floor","setFillStyle","fillRect","drawImage","path","setFontSize","setTextAlign","_strLastIndex","_strHeight","_num","i","length","measureText","fillText","substring","setTimeout","draw","ret","getNewImage","Promise","resolve","errs","src","image","err","canvasToTempFilePath","canvasId","quality","complete","push"],"mappings":"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","file":"pages/shop/QRCode.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/shop/QRCode.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./QRCode.vue?vue&type=template&id=0a82bdc0&scoped=true&\"\nvar renderjs\nimport script from \"./QRCode.vue?vue&type=script&lang=js&\"\nexport * from \"./QRCode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QRCode.vue?vue&type=style&index=0&id=0a82bdc0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a82bdc0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"UNI/goodPrince/pages/shop/QRCode.vue\"\nexport default component.exports","export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./QRCode.vue?vue&type=template&id=0a82bdc0&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./QRCode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./QRCode.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _this;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcanvasW: 0,\n\t\t\tcanvasH: 0,\n\t\t\timgSrc: \"http://qakj5dvcb.bkt.clouddn.com/static/qr_bg.png\", // 背景图\n\t\t\t// imgSrc: \"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1561799702,4184189341&fm=26&gp=0.jpg\", // 背景图\n\t\t\tTitle: \"月玲珑广式早茶\", // 店铺名\n\t\t\tQrSrc: \"http://img0.imgtn.bdimg.com/it/u=1891218604,1144850372&fm=26&gp=0.jpg\", //太阳码\n\t\t\tLineType: true, //标题显示行数\t\t（注超出2行显示会导致画布布局絮乱）\n\t\t\ttempFilePath: [], // 海报\n\t\t\tfinished: false,\n\t\t\topenSettingBtnHidden: true, //是否授权\n\t\t}\n\t},\n\tmounted() {\n\t\t_this = this;\n\t\t_this.OnCanvas();\n\t},\n\tmethods: {\n\t\t//微信小程序保存到相册\n\t\thandleSetting(e) {\n\t\t\tif (!e.detail.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t_this.openSettingBtnHidden = false;\n\t\t\t} else {\n\t\t\t\t_this.openSettingBtnHidden = true;\n\t\t\t}\n\t\t},\n\t\tsaveImage: function(e) {\n\n\t\t\tif (!this.finished) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '正在生成图片，稍后再试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t//获取相册授权\n\t\t\tuni.getSetting({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tif (!res.authSetting['scope.writePhotosAlbum']) {\n\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\tscope: 'scope.writePhotosAlbum',\n\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t//这里是用户同意授权后的回调\n\t\t\t\t\t\t\t\t_this.saveImgToLocal();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail() { //这里是用户拒绝授权后的回调\n\t\t\t\t\t\t\t\t_this.openSettingBtnHidden = false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else { //用户已经授权过了\n\t\t\t\t\t\t_this.saveImgToLocal();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsaveImgToLocal: function(e) {\n\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定保存到相册吗',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.downloadFile({\n\t\t\t\t\t\t\turl: _this.tempFilePath[0], //图片地址\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\t\t\t\t\t\t\tfilePath: res.tempFilePath,\n\t\t\t\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"保存成功\",\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfail: function() {\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"保存失败\",\n\t\t\t\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (res.cancel) {\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\tpreviewImage() {\n\t\t\tconsole.log(\"adsfsdf\")\n\t\t\tuni.previewImage({\n\t\t\t\turls: this.tempFilePath,\n\t\t\t\tcurrent: \"\",\n\t\t\t})\n\t\t},\n\t\tasync OnCanvas() {\n\t\t\t_this.ctx = uni.createCanvasContext(\"myCanvas\", this);\n\t\t\tconst C_W = uni.upx2px(662), //canvas宽度\n\t\t\t\tC_P = uni.upx2px(0), //canvas Padding 间距\n\t\t\t\tC_Q = uni.upx2px(150); //二维码或太阳码宽高\n\t\t\tlet _strlineW = 0; //文本宽度\n\t\t\tlet _imgInfo = await _this.getImageInfo({\n\t\t\t\timgSrc: _this.imgSrc\n\t\t\t}); //背景图\n\t\t\tlet _QrCode = await _this.getImageInfo({\n\t\t\t\timgSrc: _this.QrSrc\n\t\t\t}); //二维码或太阳码\n\t\t\tlet r = [_imgInfo.width, _imgInfo.height];\n\t\t\tlet q = [_QrCode.width, _QrCode.height];\n\t\t\tlet imgW = C_W - C_P * 2;\n\t\t\tif (r[0] != imgW) {\n\t\t\t\tr[1] = Math.floor((imgW / r[0]) * r[1]);\n\t\t\t\tr[0] = imgW;\n\t\t\t}\n\t\t\tif (q[0] != C_Q) {\n\t\t\t\tq[1] = Math.floor((C_Q / q[0]) * q[1]);\n\t\t\t\tq[0] = C_Q;\n\t\t\t}\n\t\t\t_this.canvasW = C_W;\n\t\t\t_this.canvasH = r[1];\n\t\t\t_this.ctx.setFillStyle(\"#fff\"); //canvas背景颜色\n\t\t\t_this.ctx.fillRect(0, 0, C_W, _this.canvasH); //canvas画布大小\n\t\t\t//添加图片展示\n\t\t\t_this.ctx.drawImage(_imgInfo.path, C_P, C_P, r[0], r[1]);\n\t\t\t//设置文本\n\t\t\t_this.ctx.setFontSize(uni.upx2px(40)); //设置标题字体大小\n\t\t\t_this.ctx.setFillStyle(\"#F4E0AD\"); //设置标题文本颜色\n\t\t\t_this.ctx.setTextAlign(\"center\")\n\t\t\tlet _strLastIndex = 0; //每次开始截取的字符串的索引\n\t\t\tlet _strHeight = uni.upx2px(90); //绘制字体距离canvas顶部的初始高度\n\t\t\tlet _num = 1;\n\t\t\tfor (let i = 0; i < _this.Title.length; i++) {\n\t\t\t\t_strlineW += _this.ctx.measureText(_this.Title[i]).width;\n\t\t\t\tif (_strlineW > r[0]) {\n\t\t\t\t\tif (_num == 2 && _this.LineType) {\n\t\t\t\t\t\t//文字换行数量大于二进行省略号处理\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i - 8) + '...', C_W / 2, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i), C_W / 2, _strHeight);\n\t\t\t\t\t\t_strlineW = 0;\n\t\t\t\t\t\t_strHeight += 30;\n\t\t\t\t\t\t_strLastIndex = i;\n\t\t\t\t\t\t_num++;\n\t\t\t\t\t}\n\t\t\t\t} else if (i == _this.Title.length - 1) {\n\t\t\t\t\t_this.ctx.fillText(_this.Title.substring(_strLastIndex, i + 1), C_W / 2, _strHeight);\n\t\t\t\t\t_strlineW = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//设置文本 end\n\n\t\t\t//添加二维码\n\t\t\t// _strHeight += uni.upx2px(20);\n\t\t\t_this.ctx.drawImage(_QrCode.path, C_W / 2 - q[0] * 2.2 / 2, uni.upx2px(184), q[0] * 2.2, q[1] * 2.2);\n\t\t\t//添加二维码 end\n\n\n\t\t\t//延迟后渲染至canvas上\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.ctx.draw(true, (ret) => {\n\t\t\t\t\t_this.getNewImage();\n\t\t\t\t\t_this.finished = true\n\t\t\t\t});\n\t\t\t}, 600);\n\n\t\t},\n\t\tasync getImageInfo({\n\t\t\timgSrc\n\t\t}) {\n\t\t\treturn new Promise((resolve, errs) => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: imgSrc,\n\t\t\t\t\tsuccess: function(image) {\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t},\n\t\t\t\t\tfail(err) {\n\t\t\t\t\t\terrs(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetNewImage() {\n\t\t\tuni.canvasToTempFilePath({\n\t\t\t\tcanvasId: \"myCanvas\",\n\t\t\t\tquality: 1,\n\t\t\t\tcomplete: (res) => {\n\t\t\t\t\t// console.log(res.tempFilePath);\n\t\t\t\t\tthis.tempFilePath.push(res.tempFilePath);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./QRCode.vue?vue&type=style&index=0&id=0a82bdc0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./QRCode.vue?vue&type=style&index=0&id=0a82bdc0&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590376316425\n      var cssReload = require(\"D:/Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}