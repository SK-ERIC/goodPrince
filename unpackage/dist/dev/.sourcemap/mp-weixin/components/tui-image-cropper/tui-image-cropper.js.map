{"version":3,"sources":["webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?5aac","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?9f9a","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?392b","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?544c","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?ce86","webpack:///D:/UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue?74dd"],"names":["name","props","imageUrl","type","String","default","height","Number","width","minWidth","minHeight","maxWidth","maxHeight","borderColor","edgeColor","edgeWidth","edgeBorderWidth","edgeOffsets","lockWidth","Boolean","lockHeight","lockRatio","scaleRatio","quality","rotateAngle","minScale","maxScale","disableRotate","limitMove","custom","startCutting","isBase64","loadding","rotateImg","data","MOVE_THROTTLE","MOVE_THROTTLE_FLAG","TIME_CUT_CENTER","CROPPER_WIDTH","CROPPER_HEIGHT","CUT_START","cutX","cutY","touchRelative","x","y","flagCutTouch","hypotenuseLength","flagEndTouch","canvasWidth","canvasHeight","imgWidth","imgHeight","scale","angle","cutAnimation","cutAnimationTime","imgTop","imgLeft","ctx","sysInfo","computed","imgTransform","watch","val","oldVal","imageReset","showLoading","uni","getImageInfo","src","success","res","imgComputeSize","imgMarginDetectionScale","fail","err","computeCutSize","moveStop","Math","round","clearTimeout","setTimeout","value","cutDetectionPosition","getImage","mounted","getSystemInfoSync","windowHeight","windowWidth","createCanvasContext","setCutCenter","$emit","methods","showToast","title","icon","draw","xpos","ypos","translate","rotate","PI","drawImage","params","destWidth","destHeight","fileType","url","base64","canvasGetImageData","canvasId","arrayBuffer","Uint8Array","arrayBufferToBase64","dataURL","hideLoading","canvasToTempFilePath","tempFilePath","$nextTick","sys","imageLoad","e","cutDetectionPositionTop","cutDetectionPositionLeft","imgMarginDetectionPosition","left","top","max","start","touches","length","clientX","clientY","abs","sqrt","pow","moveThrottle","platform","move","moveDuring","hypotenuse","current_deg","first_atan","atan2","first_atan_old","second_atan","second_atan_old","first_deg","second_deg","end","cutTouchMove","size_correct","size_inspect","corner","cutTouchStart","currentX","currentY","left_x1","left_x2","top_y1","top_y2","right_x1","right_x2","bottom_y1","bottom_y2","cutTouchEnd","mask","stop","back","navigateBack","setAngle"],"mappings":"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","file":"components/tui-image-cropper/tui-image-cropper.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./tui-image-cropper.vue?vue&type=template&id=2cebc490&scoped=true&\"\nvar renderjs\nimport script from \"./tui-image-cropper.vue?vue&type=script&scoped=true&lang=js&\"\nexport * from \"./tui-image-cropper.vue?vue&type=script&scoped=true&lang=js&\"\nimport style0 from \"./tui-image-cropper.vue?vue&type=style&index=0&id=2cebc490&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cebc490\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"UNI/goodPrince/components/tui-image-cropper/tui-image-cropper.vue\"\nexport default component.exports","export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tui-image-cropper.vue?vue&type=template&id=2cebc490&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tui-image-cropper.vue?vue&type=script&scoped=true&lang=js&\"; export default mod; export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tui-image-cropper.vue?vue&type=script&scoped=true&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n/**\r\n * 注意：组件中使用的图片地址，将文件复制到自己项目中\r\n * 如果图片位置与组件同级，编译成小程序时图片会丢失\r\n * 拷贝static下整个components文件夹\r\n *也可直接转成base64（不建议）\r\n * */\r\nexport default {\r\n\tname: 'tuiImageCropper',\r\n\tprops: {\r\n\t\t//图片路径\r\n\t\timageUrl: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\t/*\r\n\t\t 默认正方形，可修改大小控制比例\r\n\t\t 裁剪框高度 px\r\n\t\t*/\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 280\r\n\t\t},\r\n\t\t//裁剪框宽度 px\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 280\r\n\t\t},\r\n\t\t//裁剪框最小宽度 px\r\n\t\tminWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 100\r\n\t\t},\r\n\t\t//裁剪框最小高度 px\r\n\t\tminHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 100\r\n\t\t},\r\n\t\t//裁剪框最大宽度 px\r\n\t\tmaxWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 360\r\n\t\t},\r\n\t\t//裁剪框最大高度 px\r\n\t\tmaxHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 360\r\n\t\t},\r\n\t\t//裁剪框border颜色\r\n\t\tborderColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'rgba(255,255,255,0.1)'\r\n\t\t},\r\n\t\t//裁剪框边缘线颜色\r\n\t\tedgeColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#FFFFFF'\r\n\t\t},\r\n\t\t//裁剪框边缘线宽度 w=h\r\n\t\tedgeWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '34rpx'\r\n\t\t},\r\n\t\t//裁剪框边缘线border宽度\r\n\t\tedgeBorderWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '6rpx'\r\n\t\t},\r\n\t\t//偏移距离，根据edgeBorderWidth进行调整\r\n\t\tedgeOffsets: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '6rpx'\r\n\t\t},\r\n\t\t/**\r\n\t\t * 如果宽度和高度都为true则裁剪框禁止拖动\r\n\t\t * 裁剪框宽度锁定\r\n\t\t */\r\n\t\tlockWidth: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t//裁剪框高度锁定\r\n\t\tlockHeight: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t//锁定裁剪框比例（放大或缩小）\r\n\t\tlockRatio: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t//生成的图片尺寸相对剪裁框的比例\r\n\t\tscaleRatio: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 3\r\n\t\t},\r\n\t\t//图片的质量，取值范围为 (0, 1]，不在范围内时当作1.0处理\r\n\t\tquality: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 1\r\n\t\t},\r\n\t\t//图片旋转角度\r\n\t\trotateAngle: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\t//图片最小缩放比\r\n\t\tminScale: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0.5\r\n\t\t},\r\n\t\t//图片最大缩放比\r\n\t\tmaxScale: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 2\r\n\t\t},\r\n\t\t//是否禁用触摸旋转（为false则可以触摸转动图片，limitMove为false生效）\r\n\t\tdisableRotate: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t//是否限制移动范围(剪裁框只能在图片内,为true不可触摸转动图片)\r\n\t\tlimitMove: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t//自定义操作栏（为true时隐藏底部操作栏）\r\n\t\tcustom: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t//值发生改变开始裁剪（custom为true时生效）\r\n\t\tstartCutting: {\r\n\t\t\ttype: [Number,Boolean],\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否返回base64(H5端默认base64)\r\n\t\t * 支持平台：App，微信小程序，支付宝小程序,H5(默认url就是base64)\r\n\t\t **/\r\n\t\tisBase64: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t//裁剪时是否显示loadding\r\n\t\tloadding: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t//旋转icon\r\n\t\trotateImg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '/static/components/cropper/img_rotate.png'\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tMOVE_THROTTLE: null, //触摸移动节流setTimeout\r\n\t\t\tMOVE_THROTTLE_FLAG: true, //节流标识\r\n\t\t\tTIME_CUT_CENTER: null,\r\n\t\t\tCROPPER_WIDTH: 200, //裁剪框宽\r\n\t\t\tCROPPER_HEIGHT: 200, //裁剪框高\r\n\t\t\tCUT_START: null,\r\n\t\t\tcutX: 0, //画布x轴起点\r\n\t\t\tcutY: 0, //画布y轴起点0\r\n\t\t\ttouchRelative: [\r\n\t\t\t\t{\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0\r\n\t\t\t\t}\r\n\t\t\t], //手指或鼠标和图片中心的相对位置\r\n\t\t\tflagCutTouch: false, //是否是拖动裁剪框\r\n\t\t\thypotenuseLength: 0, //双指触摸时斜边长度\r\n\t\t\tflagEndTouch: false, //是否结束触摸\r\n\t\t\tcanvasWidth: 0,\r\n\t\t\tcanvasHeight: 0,\r\n\t\t\timgWidth: 0, //图片宽度\r\n\t\t\timgHeight: 0, //图片高度\r\n\t\t\tscale: 1, //图片缩放比\r\n\t\t\tangle: 0, //图片旋转角度\r\n\t\t\tcutAnimation: false, //是否开启图片和裁剪框过渡\r\n\t\t\tcutAnimationTime: null,\r\n\t\t\timgTop: 0, //图片上边距\r\n\t\t\timgLeft: 0, //图片左边距\r\n\t\t\tctx: null,\r\n\t\t\tsysInfo: null\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\timgTransform: function() {\r\n\t\t\treturn `translate3d(${this.imgLeft - this.imgWidth / 2}px,${this.imgTop - this.imgHeight / 2}px,0) scale(${this.scale}) rotate(${this.angle}deg)`;\r\n\t\t},\r\n\t\t\r\n\t},\r\n\twatch: {\r\n\t\timageUrl(val, oldVal) {\r\n\t\t\tthis.imageReset();\r\n\t\t\tthis.showLoading();\r\n\t\t\tuni.getImageInfo({\r\n\t\t\t\tsrc: val,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t//计算图片尺寸\r\n\t\t\t\t\tthis.imgComputeSize(res.width, res.height);\r\n\t\t\t\t\tif (this.limitMove) {\r\n\t\t\t\t\t\t//限制移动，不留空白处理\r\n\t\t\t\t\t\tthis.imgMarginDetectionScale();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: err => {\r\n\t\t\t\t\tthis.imgComputeSize();\r\n\t\t\t\t\tif (this.limitMove) {\r\n\t\t\t\t\t\tthis.imgMarginDetectionScale();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//监听截取框宽高变化\r\n\t\tcanvasWidth(val) {\r\n\t\t\tif (val < this.minWidth) {\r\n\t\t\t\tthis.canvasWidth = this.minWidth;\r\n\t\t\t}\r\n\t\t\tthis.computeCutSize();\r\n\t\t},\r\n\t\tcanvasHeight(val) {\r\n\t\t\tif (val < this.minHeight) {\r\n\t\t\t\tthis.canvasHeight = this.minHeight;\r\n\t\t\t}\r\n\t\t\tthis.computeCutSize();\r\n\t\t},\r\n\t\trotateAngle(val) {\r\n\t\t\tthis.cutAnimation = true;\r\n\t\t\tthis.angle = val;\r\n\t\t},\r\n\t\tangle(val) {\r\n\t\t\tthis.moveStop();\r\n\t\t\tif (this.limitMove && val % 90) {\r\n\t\t\t\tthis.angle = Math.round(val / 90) * 90;\r\n\t\t\t}\r\n\t\t\tthis.imgMarginDetectionScale();\r\n\t\t},\r\n\t\tcutAnimation(val) {\r\n\t\t\t//开启过渡300毫秒之后自动关闭\r\n\t\t\tclearTimeout(this.cutAnimationTime);\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.cutAnimationTime = setTimeout(() => {\r\n\t\t\t\t\tthis.cutAnimation = false;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitMove(val) {\r\n\t\t\tif (val) {\r\n\t\t\t\tif (this.angle % 90) {\r\n\t\t\t\t\tthis.angle = Math.round(this.angle / 90) * 90;\r\n\t\t\t\t}\r\n\t\t\t\tthis.imgMarginDetectionScale();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcutY(value) {\r\n\t\t\tthis.cutDetectionPosition();\r\n\t\t},\r\n\t\tcutX(value) {\r\n\t\t\tthis.cutDetectionPosition();\r\n\t\t},\r\n\t\tstartCutting(val) {\r\n\t\t\tif (this.custom && val) {\r\n\t\t\t\tthis.getImage();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.sysInfo = uni.getSystemInfoSync();\r\n\t\tthis.imgTop = this.sysInfo.windowHeight / 2;\r\n\t\tthis.imgLeft = this.sysInfo.windowWidth / 2;\r\n\t\tthis.CROPPER_WIDTH = this.width;\r\n\t\tthis.CROPPER_HEIGHT = this.height;\r\n\t\tthis.canvasHeight = this.height;\r\n\t\tthis.canvasWidth = this.width;\r\n\t\tthis.ctx = uni.createCanvasContext('tui-image-cropper', this);\r\n\t\tthis.setCutCenter();\r\n\t\t//设置裁剪框大小>设置图片尺寸>绘制canvas\r\n\t\tthis.computeCutSize();\r\n\t\t//检查裁剪框是否在范围内\r\n\t\tthis.cutDetectionPosition();\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.$emit('ready', {});\r\n\t\t}, 200);\r\n\t},\r\n\tmethods: {\r\n\t\t//返回裁剪后图片信息\r\n\t\tgetImage() {\r\n\t\t\tif (!this.imageUrl) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请选择图片',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loadding && this.showLoading();\r\n\t\t\tlet draw = () => {\r\n\t\t\t\t//图片实际大小\r\n\t\t\t\tlet imgWidth = this.imgWidth * this.scale * this.scaleRatio;\r\n\t\t\t\tlet imgHeight = this.imgHeight * this.scale * this.scaleRatio;\r\n\t\t\t\t//canvas和图片的相对距离\r\n\t\t\t\tlet xpos = this.imgLeft - this.cutX;\r\n\t\t\t\tlet ypos = this.imgTop - this.cutY;\r\n\t\t\t\t//旋转画布\r\n\t\t\t\tthis.ctx.translate(xpos * this.scaleRatio, ypos * this.scaleRatio);\r\n\t\t\t\tthis.ctx.rotate((this.angle * Math.PI) / 180);\r\n\t\t\t\tthis.ctx.drawImage(this.imageUrl, -imgWidth / 2, -imgHeight / 2, imgWidth, imgHeight);\r\n\t\t\t\tthis.ctx.draw(false, () => {\r\n\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\twidth: this.canvasWidth * this.scaleRatio,\r\n\t\t\t\t\t\theight: Math.round(this.canvasHeight * this.scaleRatio),\r\n\t\t\t\t\t\tdestWidth: this.canvasWidth * this.scaleRatio,\r\n\t\t\t\t\t\tdestHeight: Math.round(this.canvasHeight) * this.scaleRatio,\r\n\t\t\t\t\t\tfileType: 'png',\r\n\t\t\t\t\t\tquality: this.quality\r\n\t\t\t\t\t};\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\turl: '',\r\n\t\t\t\t\t\tbase64: '',\r\n\t\t\t\t\t\twidth: this.canvasWidth * this.scaleRatio,\r\n\t\t\t\t\t\theight: this.canvasHeight * this.scaleRatio\r\n\t\t\t\t\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tif (this.isBase64) {\r\n\t\t\t\t\t\tuni.canvasGetImageData({\r\n\t\t\t\t\t\t\tcanvasId: 'tui-image-cropper',\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\twidth: this.canvasWidth * this.scaleRatio,\r\n\t\t\t\t\t\t\theight: Math.round(this.canvasHeight * this.scaleRatio),\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\tconst arrayBuffer = new Uint8Array(res.data);\r\n\t\t\t\t\t\t\t\tconst base64 = uni.arrayBufferToBase64(arrayBuffer);\r\n\t\t\t\t\t\t\t\tdata.base64 = dataURL;\r\n\t\t\t\t\t\t\t\tthis.loadding && uni.hideLoading();\r\n\t\t\t\t\t\t\t\tthis.$emit('cropper', data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.canvasToTempFilePath(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t...params,\r\n\t\t\t\t\t\t\t\tcanvasId: 'tui-image-cropper',\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tdata.url = res.tempFilePath;\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\tthis.loadding && uni.hideLoading();\r\n\t\t\t\t\t\t\t\t\tthis.$emit('cropper', data);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tif (this.CROPPER_WIDTH != this.canvasWidth || this.CROPPER_HEIGHT != this.canvasHeight) {\r\n\t\t\t\tthis.CROPPER_WIDTH = this.canvasWidth;\r\n\t\t\t\tthis.CROPPER_HEIGHT = this.canvasHeight;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tdraw();\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdraw();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置剪裁框和图片居中\r\n\t\t */\r\n\t\tsetCutCenter() {\r\n\t\t\tlet sys = this.sysInfo || uni.getSystemInfoSync();\r\n\t\t\tlet cutY = (sys.windowHeight - this.canvasHeight) * 0.5;\r\n\t\t\tlet cutX = (sys.windowWidth - this.canvasWidth) * 0.5;\r\n\t\t\t//顺序不能变\r\n\t\t\tthis.imgTop = this.imgTop - this.cutY + cutY;\r\n\t\t\tthis.cutY = cutY; //截取的框上边距\r\n\t\t\tthis.imgLeft = this.imgLeft - this.cutX + cutX;\r\n\t\t\tthis.cutX = cutX; //截取的框左边距\r\n\t\t},\r\n\t\timageReset() {\r\n\t\t\t// this.cutAnimation = true;\r\n\t\t\tthis.scale = 1;\r\n\t\t\tthis.angle = 0;\r\n\t\t\tlet sys = this.sysInfo || uni.getSystemInfoSync();\r\n\t\t\tthis.imgTop = sys.windowHeight / 2;\r\n\t\t\tthis.imgLeft = sys.windowWidth / 2;\r\n\t\t},\r\n\t\timageLoad(e) {\r\n\t\t\tthis.imageReset();\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.$emit('imageLoad', {});\r\n\t\t},\r\n\t\t//检测剪裁框位置是否在允许的范围内(屏幕内)\r\n\t\tcutDetectionPosition() {\r\n\t\t\tlet cutDetectionPositionTop = () => {\r\n\t\t\t\t\t//检测上边距是否在范围内\r\n\t\t\t\t\tif (this.cutY < 0) {\r\n\t\t\t\t\t\tthis.cutY = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.cutY > this.sysInfo.windowHeight - this.canvasHeight) {\r\n\t\t\t\t\t\tthis.cutY = this.sysInfo.windowHeight - this.canvasHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcutDetectionPositionLeft = () => {\r\n\t\t\t\t\t//检测左边距是否在范围内\r\n\t\t\t\t\tif (this.cutX < 0) {\r\n\t\t\t\t\t\tthis.cutX = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.cutX > this.sysInfo.windowWidth - this.canvasWidth) {\r\n\t\t\t\t\t\tthis.cutX = this.sysInfo.windowWidth - this.canvasWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t//裁剪框坐标处理（如果只写一个参数则另一个默认为0，都不写默认居中）\r\n\t\t\tif (this.cutY == null && this.cutX == null) {\r\n\t\t\t\tlet cutY = (this.sysInfo.windowHeight - this.canvasHeight) * 0.5;\r\n\t\t\t\tlet cutX = (this.sysInfo.windowWidth - this.canvasWidth) * 0.5;\r\n\t\t\t\tthis.cutY = cutY; //截取的框上边距\r\n\t\t\t\tthis.cutX = cutX; //截取的框左边距\r\n\t\t\t} else if (this.cutY != null && this.cutX != null) {\r\n\t\t\t\tcutDetectionPositionTop();\r\n\t\t\t\tcutDetectionPositionLeft();\r\n\t\t\t} else if (this.cutY != null && this.cutX == null) {\r\n\t\t\t\tcutDetectionPositionTop();\r\n\t\t\t\tthis.cutX = (this.sysInfo.windowWidth - this.canvasWidth) / 2;\r\n\t\t\t} else if (this.cutY == null && this.cutX != null) {\r\n\t\t\t\tcutDetectionPositionLeft();\r\n\t\t\t\tthis.cutY = (this.sysInfo.windowHeight - this.canvasHeight) / 2;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 图片边缘检测-位置\r\n\t\t */\r\n\t\timgMarginDetectionPosition(scale) {\r\n\t\t\tif (!this.limitMove) return;\r\n\t\t\tlet left = this.imgLeft;\r\n\t\t\tlet top = this.imgTop;\r\n\t\t\tscale = scale || this.scale;\r\n\t\t\tlet imgWidth = this.imgWidth;\r\n\t\t\tlet imgHeight = this.imgHeight;\r\n\t\t\tif ((this.angle / 90) % 2) {\r\n\t\t\t\timgWidth = this.imgHeight;\r\n\t\t\t\timgHeight = this.imgWidth;\r\n\t\t\t}\r\n\t\t\tleft = this.cutX + (imgWidth * scale) / 2 >= left ? left : this.cutX + (imgWidth * scale) / 2;\r\n\t\t\tleft = this.cutX + this.canvasWidth - (imgWidth * scale) / 2 <= left ? left : this.cutX + this.canvasWidth - (imgWidth * scale) / 2;\r\n\t\t\ttop = this.cutY + (imgHeight * scale) / 2 >= top ? top : this.cutY + (imgHeight * scale) / 2;\r\n\t\t\ttop = this.cutY + this.canvasHeight - (imgHeight * scale) / 2 <= top ? top : this.cutY + this.canvasHeight - (imgHeight * scale) / 2;\r\n\t\t\tthis.imgLeft = left;\r\n\t\t\tthis.imgTop = top;\r\n\t\t\tthis.scale = scale;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 图片边缘检测-缩放\r\n\t\t */\r\n\t\timgMarginDetectionScale() {\r\n\t\t\tif (!this.limitMove) return;\r\n\t\t\tlet scale = this.scale;\r\n\t\t\tlet imgWidth = this.imgWidth;\r\n\t\t\tlet imgHeight = this.imgHeight;\r\n\t\t\tif ((this.angle / 90) % 2) {\r\n\t\t\t\timgWidth = this.imgHeight;\r\n\t\t\t\timgHeight = this.imgWidth;\r\n\t\t\t}\r\n\t\t\tif (imgWidth * scale < this.canvasWidth) {\r\n\t\t\t\tscale = this.canvasWidth / imgWidth;\r\n\t\t\t}\r\n\t\t\tif (imgHeight * scale < this.canvasHeight) {\r\n\t\t\t\tscale = Math.max(scale, this.canvasHeight / imgHeight);\r\n\t\t\t}\r\n\t\t\tthis.imgMarginDetectionPosition(scale);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 计算图片尺寸\r\n\t\t */\r\n\t\timgComputeSize(width, height) {\r\n\t\t\t//默认按图片最小边 = 对应裁剪框尺寸\r\n\t\t\tlet imgWidth = width,\r\n\t\t\t\timgHeight = height;\r\n\t\t\tif (imgWidth && imgHeight) {\r\n\t\t\t\tif (imgWidth / imgHeight > (this.canvasWidth || this.width) / (this.canvasHeight || this.height)) {\r\n\t\t\t\t\timgHeight = this.canvasHeight || this.height;\r\n\t\t\t\t\timgWidth = (width / height) * imgHeight;\r\n\t\t\t\t} else {\r\n\t\t\t\t\timgWidth = this.canvasWidth || this.width;\r\n\t\t\t\t\timgHeight = (height / width) * imgWidth;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tlet sys = this.sysInfo || uni.getSystemInfoSync();\r\n\t\t\t\timgWidth = sys.windowWidth;\r\n\t\t\t\timgHeight = 0;\r\n\t\t\t}\r\n\t\t\tthis.imgWidth = imgWidth;\r\n\t\t\tthis.imgHeight = imgHeight;\r\n\t\t},\r\n\t\t//改变截取框大小\r\n\t\tcomputeCutSize() {\r\n\t\t\tif (this.canvasWidth > this.sysInfo.windowWidth) {\r\n\t\t\t\tthis.canvasWidth = this.sysInfo.windowWidth;\r\n\t\t\t} else if (this.canvasWidth + this.cutX > this.sysInfo.windowWidth) {\r\n\t\t\t\tthis.cutX = this.sysInfo.windowWidth - this.cutX;\r\n\t\t\t}\r\n\t\t\tif (this.canvasHeight > this.sysInfo.windowHeight) {\r\n\t\t\t\tthis.canvasHeight = this.sysInfo.windowHeight;\r\n\t\t\t} else if (this.canvasHeight + this.cutY > this.sysInfo.windowHeight) {\r\n\t\t\t\tthis.cutY = this.sysInfo.windowHeight - this.cutY;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//开始触摸\r\n\t\tstart(e) {\r\n\t\t\tthis.flagEndTouch = false;\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t//单指拖动\r\n\t\t\t\tthis.touchRelative[0] = {\r\n\t\t\t\t\tx: e.touches[0].clientX - this.imgLeft,\r\n\t\t\t\t\ty: e.touches[0].clientY - this.imgTop\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\t//双指放大\r\n\t\t\t\tlet width = Math.abs(e.touches[0].clientX - e.touches[1].clientX);\r\n\t\t\t\tlet height = Math.abs(e.touches[0].clientY - e.touches[1].clientY);\r\n\t\t\t\tthis.touchRelative = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: e.touches[0].clientX - this.imgLeft,\r\n\t\t\t\t\t\ty: e.touches[0].clientY - this.imgTop\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: e.touches[1].clientX - this.imgLeft,\r\n\t\t\t\t\t\ty: e.touches[1].clientY - this.imgTop\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\tthis.hypotenuseLength = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\r\n\t\t\t}\r\n\t\t},\r\n\t\tmoveThrottle() {\r\n\t\t\tif (this.sysInfo.platform == 'android') {\r\n\t\t\t\tclearTimeout(this.MOVE_THROTTLE);\r\n\t\t\t\tthis.MOVE_THROTTLE = setTimeout(() => {\r\n\t\t\t\t\tthis.MOVE_THROTTLE_FLAG = true;\r\n\t\t\t\t}, 1000 / 40);\r\n\t\t\t\treturn this.MOVE_THROTTLE_FLAG;\r\n\t\t\t} else {\r\n\t\t\t\tthis.MOVE_THROTTLE_FLAG = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmove(e) {\r\n\t\t\tif (this.flagEndTouch || !this.MOVE_THROTTLE_FLAG) return;\r\n\t\t\tthis.MOVE_THROTTLE_FLAG = false;\r\n\t\t\tthis.moveThrottle();\r\n\t\t\tthis.moveDuring();\r\n\t\t\tif (e.touches.length == 1) {\r\n\t\t\t\t//单指拖动\r\n\t\t\t\tlet left = e.touches[0].clientX - this.touchRelative[0].x,\r\n\t\t\t\t\ttop = e.touches[0].clientY - this.touchRelative[0].y;\r\n\t\t\t\t//图像边缘检测,防止截取到空白\r\n\t\t\t\tthis.imgLeft = left;\r\n\t\t\t\tthis.imgTop = top;\r\n\t\t\t\tthis.imgMarginDetectionPosition();\r\n\t\t\t} else {\r\n\t\t\t\t//双指放大\r\n\t\t\t\tlet width = Math.abs(e.touches[0].clientX - e.touches[1].clientX),\r\n\t\t\t\t\theight = Math.abs(e.touches[0].clientY - e.touches[1].clientY),\r\n\t\t\t\t\thypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)),\r\n\t\t\t\t\tscale = this.scale * (hypotenuse / this.hypotenuseLength),\r\n\t\t\t\t\tcurrent_deg = 0;\r\n\t\t\t\tscale = scale <= this.minScale ? this.minScale : scale;\r\n\t\t\t\tscale = scale >= this.maxScale ? this.maxScale : scale;\r\n\t\t\t\t//图像边缘检测,防止截取到空白\r\n\t\t\t\tthis.scale = scale;\r\n\t\t\t\tthis.imgMarginDetectionScale();\r\n\t\t\t\t//双指旋转(如果没禁用旋转)\r\n\t\t\t\tlet touchRelative = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: e.touches[0].clientX - this.imgLeft,\r\n\t\t\t\t\t\ty: e.touches[0].clientY - this.imgTop\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: e.touches[1].clientX - this.imgLeft,\r\n\t\t\t\t\t\ty: e.touches[1].clientY - this.imgTop\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\tif (!this.disableRotate) {\r\n\t\t\t\t\tlet first_atan = (180 / Math.PI) * Math.atan2(touchRelative[0].y, touchRelative[0].x);\r\n\t\t\t\t\tlet first_atan_old = (180 / Math.PI) * Math.atan2(this.touchRelative[0].y, this.touchRelative[0].x);\r\n\t\t\t\t\tlet second_atan = (180 / Math.PI) * Math.atan2(touchRelative[1].y, touchRelative[1].x);\r\n\t\t\t\t\tlet second_atan_old = (180 / Math.PI) * Math.atan2(this.touchRelative[1].y, this.touchRelative[1].x);\r\n\t\t\t\t\t//当前旋转的角度\r\n\t\t\t\t\tlet first_deg = first_atan - first_atan_old,\r\n\t\t\t\t\t\tsecond_deg = second_atan - second_atan_old;\r\n\t\t\t\t\tif (first_deg != 0) {\r\n\t\t\t\t\t\tcurrent_deg = first_deg;\r\n\t\t\t\t\t} else if (second_deg != 0) {\r\n\t\t\t\t\t\tcurrent_deg = second_deg;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.touchRelative = touchRelative;\r\n\t\t\t\tthis.hypotenuseLength = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\r\n\t\t\t\t//更新视图\r\n\t\t\t\tthis.angle = this.angle + current_deg;\r\n\t\t\t\tthis.scale = this.scale;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//结束操作\r\n\t\tend(e) {\r\n\t\t\tthis.flagEndTouch = true;\r\n\t\t\tthis.moveStop();\r\n\t\t},\r\n\t\t//裁剪框处理\r\n\t\tcutTouchMove(e) {\r\n\t\t\tif (this.flagCutTouch && this.MOVE_THROTTLE_FLAG) {\r\n\t\t\t\tif (this.lockRatio && (this.lockWidth || this.lockHeight)) return;\r\n\t\t\t\t//节流\r\n\t\t\t\tthis.MOVE_THROTTLE_FLAG = false;\r\n\t\t\t\tthis.moveThrottle();\r\n\t\t\t\tlet width = this.canvasWidth,\r\n\t\t\t\t\theight = this.canvasHeight,\r\n\t\t\t\t\tcutY = this.cutY,\r\n\t\t\t\t\tcutX = this.cutX,\r\n\t\t\t\t\tsize_correct = () => {\r\n\t\t\t\t\t\twidth = width <= this.maxWidth ? (width >= this.minWidth ? width : this.minWidth) : this.maxWidth;\r\n\t\t\t\t\t\theight = height <= this.maxHeight ? (height >= this.minHeight ? height : this.minHeight) : this.maxHeight;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize_inspect = () => {\r\n\t\t\t\t\t\tif ((width > this.maxWidth || width < this.minWidth || height > this.maxHeight || height < this.minHeight) && this.lockRatio) {\r\n\t\t\t\t\t\t\tsize_correct();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsize_correct();\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\theight = this.CUT_START.height + (this.CUT_START.corner > 1 && this.CUT_START.corner < 4 ? 1 : -1) * (this.CUT_START.y - e.touches[0].clientY);\r\n\t\t\t\tswitch (this.CUT_START.corner) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\twidth = this.CUT_START.width - this.CUT_START.x + e.touches[0].clientX;\r\n\t\t\t\t\t\tif (this.lockRatio) {\r\n\t\t\t\t\t\t\theight = width / (this.canvasWidth / this.canvasHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!size_inspect()) return;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\twidth = this.CUT_START.width - this.CUT_START.x + e.touches[0].clientX;\r\n\t\t\t\t\t\tif (this.lockRatio) {\r\n\t\t\t\t\t\t\theight = width / (this.canvasWidth / this.canvasHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!size_inspect()) return;\r\n\t\t\t\t\t\tcutY = this.CUT_START.cutY - (height - this.CUT_START.height);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\twidth = this.CUT_START.width + this.CUT_START.x - e.touches[0].clientX;\r\n\t\t\t\t\t\tif (this.lockRatio) {\r\n\t\t\t\t\t\t\theight = width / (this.canvasWidth / this.canvasHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!size_inspect()) return;\r\n\t\t\t\t\t\tcutY = this.CUT_START.cutY - (height - this.CUT_START.height);\r\n\t\t\t\t\t\tcutX = this.CUT_START.cutX - (width - this.CUT_START.width);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\twidth = this.CUT_START.width + this.CUT_START.x - e.touches[0].clientX;\r\n\t\t\t\t\t\tif (this.lockRatio) {\r\n\t\t\t\t\t\t\theight = width / (this.canvasWidth / this.canvasHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!size_inspect()) return;\r\n\t\t\t\t\t\tcutX = this.CUT_START.cutX - (width - this.CUT_START.width);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.lockWidth && !this.lockHeight) {\r\n\t\t\t\t\tthis.canvasWidth = width;\r\n\t\t\t\t\tthis.cutX = cutX;\r\n\t\t\t\t\tthis.canvasHeight = height;\r\n\t\t\t\t\tthis.cutY = cutY;\r\n\t\t\t\t} else if (!this.lockWidth) {\r\n\t\t\t\t\tthis.canvasWidth = width;\r\n\t\t\t\t\tthis.cutX = cutX;\r\n\t\t\t\t} else if (!this.lockHeight) {\r\n\t\t\t\t\tthis.canvasHeight = height;\r\n\t\t\t\t\tthis.cutY = cutY;\r\n\t\t\t\t}\r\n\t\t\t\tthis.imgMarginDetectionScale();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcutTouchStart(e) {\r\n\t\t\tlet currentX = e.touches[0].clientX;\r\n\t\t\tlet currentY = e.touches[0].clientY;\r\n\r\n\t\t\t/*\r\n\t\t\t * (右下-1 右上-2 左上-3 左下-4)\r\n\t\t\t * left_x [3,4]\r\n\t\t\t * top_y [2,3]\r\n\t\t\t * right_x [1,2]\r\n\t\t\t * bottom_y [1,4]\r\n\t\t\t */\r\n\t\t\tlet left_x1 = this.cutX - 24;\r\n\t\t\tlet left_x2 = this.cutX + 24;\r\n\r\n\t\t\tlet top_y1 = this.cutY - 24;\r\n\t\t\tlet top_y2 = this.cutY + 24;\r\n\r\n\t\t\tlet right_x1 = this.cutX + this.canvasWidth - 24;\r\n\t\t\tlet right_x2 = this.cutX + this.canvasWidth + 24;\r\n\r\n\t\t\tlet bottom_y1 = this.cutY + this.canvasHeight - 24;\r\n\t\t\tlet bottom_y2 = this.cutY + this.canvasHeight + 24;\r\n\r\n\t\t\tif (currentX > right_x1 && currentX < right_x2 && currentY > bottom_y1 && currentY < bottom_y2) {\r\n\t\t\t\tthis.moveDuring();\r\n\t\t\t\tthis.flagCutTouch = true;\r\n\t\t\t\tthis.flagEndTouch = true;\r\n\t\t\t\tthis.CUT_START = {\r\n\t\t\t\t\twidth: this.canvasWidth,\r\n\t\t\t\t\theight: this.canvasHeight,\r\n\t\t\t\t\tx: currentX,\r\n\t\t\t\t\ty: currentY,\r\n\t\t\t\t\tcorner: 1\r\n\t\t\t\t};\r\n\t\t\t} else if (currentX > right_x1 && currentX < right_x2 && currentY > top_y1 && currentY < top_y2) {\r\n\t\t\t\tthis.moveDuring();\r\n\t\t\t\tthis.flagCutTouch = true;\r\n\t\t\t\tthis.flagEndTouch = true;\r\n\t\t\t\tthis.CUT_START = {\r\n\t\t\t\t\twidth: this.canvasWidth,\r\n\t\t\t\t\theight: this.canvasHeight,\r\n\t\t\t\t\tx: currentX,\r\n\t\t\t\t\ty: currentY,\r\n\t\t\t\t\tcutY: this.cutY,\r\n\t\t\t\t\tcutX: this.cutX,\r\n\t\t\t\t\tcorner: 2\r\n\t\t\t\t};\r\n\t\t\t} else if (currentX > left_x1 && currentX < left_x2 && currentY > top_y1 && currentY < top_y2) {\r\n\t\t\t\tthis.moveDuring();\r\n\t\t\t\tthis.flagCutTouch = true;\r\n\t\t\t\tthis.flagEndTouch = true;\r\n\t\t\t\tthis.CUT_START = {\r\n\t\t\t\t\twidth: this.canvasWidth,\r\n\t\t\t\t\theight: this.canvasHeight,\r\n\t\t\t\t\tcutY: this.cutY,\r\n\t\t\t\t\tcutX: this.cutX,\r\n\t\t\t\t\tx: currentX,\r\n\t\t\t\t\ty: currentY,\r\n\t\t\t\t\tcorner: 3\r\n\t\t\t\t};\r\n\t\t\t} else if (currentX > left_x1 && currentX < left_x2 && currentY > bottom_y1 && currentY < bottom_y2) {\r\n\t\t\t\tthis.moveDuring();\r\n\t\t\t\tthis.flagCutTouch = true;\r\n\t\t\t\tthis.flagEndTouch = true;\r\n\t\t\t\tthis.CUT_START = {\r\n\t\t\t\t\twidth: this.canvasWidth,\r\n\t\t\t\t\theight: this.canvasHeight,\r\n\t\t\t\t\tcutY: this.cutY,\r\n\t\t\t\t\tcutX: this.cutX,\r\n\t\t\t\t\tx: currentX,\r\n\t\t\t\t\ty: currentY,\r\n\t\t\t\t\tcorner: 4\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\tcutTouchEnd(e) {\r\n\t\t\tthis.moveStop();\r\n\t\t\tthis.flagCutTouch = false;\r\n\t\t},\r\n\t\t//停止移动时需要做的操作\r\n\t\tmoveStop() {\r\n\t\t\t//清空之前的自动居中延迟函数并添加最新的\r\n\t\t\tclearTimeout(this.TIME_CUT_CENTER);\r\n\t\t\tthis.TIME_CUT_CENTER = setTimeout(() => {\r\n\t\t\t\t//动画启动\r\n\t\t\t\tif (!this.cutAnimation) {\r\n\t\t\t\t\tthis.cutAnimation = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.setCutCenter();\r\n\t\t\t}, 800);\r\n\t\t},\r\n\t\t//移动中\r\n\t\tmoveDuring() {\r\n\t\t\t//清空之前的自动居中延迟函数\r\n\t\t\tclearTimeout(this.TIME_CUT_CENTER);\r\n\t\t},\r\n\t\tshowLoading() {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '请稍候...',\r\n\t\t\t\tmask: true\r\n\t\t\t});\r\n\t\t},\r\n\t\tstop() {},\r\n\t\tback() {\r\n\t\t\tuni.navigateBack();\r\n\t\t},\r\n\t\tsetAngle() {\r\n\t\t\tthis.cutAnimation = true;\r\n\t\t\tthis.angle = this.angle + 90;\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tui-image-cropper.vue?vue&type=style&index=0&id=2cebc490&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./tui-image-cropper.vue?vue&type=style&index=0&id=2cebc490&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590232920764\n      var cssReload = require(\"D:/Download/HBuilderX.2.6.16.20200424/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}